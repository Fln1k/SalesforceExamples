<aura:component controller="customFlowController">
  <!-- Attributes -->
  <aura:attribute name="accountId" type="Id" default="" />
  <aura:attribute name="productsOptions" type="List" default="[]" />
  <aura:attribute name="total" type="Double" default="0.0" />
  <aura:attribute name="subtotals" type="Object" default="{}" />
  <!-- Events -->
  <aura:handler name="init" value="{!this}" action="{!c.init}" />
  <aura:handler
    name="change"
    value="{!v.subtotals}"
    action="{!c.recalculateTotal}"
  />
  <!-- Layout -->
  <aura:iteration items="{!v.productsOptions}" var="pricebook">
    <c:priceBookTable options="{!pricebook}" subtotals="{!v.subtotals}" />
    <br />
  </aura:iteration>
  <div style="float: right">
    Total: {!v.total + v.productsOptions[0].currency}
  </div>
</aura:component>
