<aura:component controller="PricebookController">
  <!-- Attributes -->
  <aura:attribute name="accountId" type="Id" default="" />
  <aura:attribute name="productsOptions" type="List" default="[]" />
  <aura:attribute name="total" type="Double" default="0.0" />
  <aura:attribute name="subtotals" type="Object" default="{}" />
  <aura:attribute name="shippingCountry" type="String" default="" />
  <aura:attribute name="currencyIsoCode" type="String" />
  <!-- Events -->
  <aura:handler name="init" value="{!this}" action="{!c.init}" />
  <aura:handler
    event="c:showEmptyProductListErrorMessage"
    action="{!c.handleShowEmptyError}"
  />
  <aura:handler
    name="change"
    value="{!v.subtotals}"
    action="{!c.recalculateTotal}"
  />
  <aura:iteration items="{!v.productsOptions}" var="pricebook">
    <c:priceBookTable options="{!pricebook}" subtotals="{!v.subtotals}" />
    <br />
  </aura:iteration>
  <div style="float: right; font-size: initial; font-family: fantasy">
    Total: {!v.total + v.productsOptions[0].currency}
  </div>
  <br />
</aura:component>
